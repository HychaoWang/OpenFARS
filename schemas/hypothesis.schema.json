{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Hypothesis",
  "type": "object",
  "required": [
    "id",
    "motivation",
    "statement",
    "expected_gain",
    "metrics",
    "mvp",
    "failure_conditions",
    "budget"
  ],
  "properties": {
    "id": {"type": "string", "description": "Unique hypothesis identifier"},
    "motivation": {"type": "string", "description": "Background and reason to test"},
    "statement": {"type": "string", "description": "Falsifiable hypothesis statement"},
    "expected_gain": {"type": "string", "description": "Where improvement should appear"},
    "metrics": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["name", "type", "target"],
        "properties": {
          "name": {"type": "string"},
          "type": {"type": "string", "enum": ["primary", "secondary"]},
          "target": {"type": "string", "description": "Desired direction or threshold"}
        }
      }
    },
    "mvp": {
      "type": "object",
      "required": ["dataset", "procedure", "sample_size"],
      "properties": {
        "dataset": {"type": "string"},
        "procedure": {"type": "string"},
        "sample_size": {"type": "integer", "minimum": 1}
      }
    },
    "failure_conditions": {
      "type": "array",
      "items": {"type": "string"}
    },
    "budget": {
      "type": "object",
      "required": ["token_limit", "compute_hours"],
      "properties": {
        "token_limit": {"type": "integer", "minimum": 0},
        "compute_hours": {"type": "number", "minimum": 0}
      }
    },
    "notes": {"type": "string"}
  }
}
